const cmdParse = require('chat-arg-parser');
module.exports=(prefix, message)=>{
    var argstemp = [];
	argstemp=cmdParse(prefix, message).args;
	if(!argstemp) {argstemp=[];}
	var args=[];
	var flags={};
	var i;
	for(i=0; i<argstemp.length; i++) {
		var arg = argstemp[i].trim();
		if(arg.startsWith('--')) {
			let flag = arg.substr(2);
			let eq = flag.indexOf(':');
			if (eq != -1) {
				flags[flag.substr(0, eq)] = flag.substr(eq + 1);
			}
			else{
				flags[flag] = true;
			}
		}
		else if(arg.startsWith('-')&arg.length<3) {
			let flag = arg.substr(1);
			flags[flag] = true;
		}
		else{
			args.push(argstemp[i]);
		}
	}
    const cmd = cmdParse(prefix, message).cmd;
    return {
        cmd,
        args,
        flags
    }
}